<!DOCTYPE html>
<html>
<head>
{include file="common@c/common" /}
<title></title>
{block name="head"} {/block}
<style>
.page {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	overflow: hidden;
}

.header {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	height: 50px;
	line-height: 50px;
	background-color: #088bff;
	color: #eee;
	left: 0;
	right: 0;
}

.header a {
	color: #eee;
	text-decoration: none;
}

.header .nav {
	position: absolute;
	left: 20px;
	bottom: 0;
	height: 30px;
	line-height: 30px;
}

.header .tools {
	position: absolute;
	right: 0;
	bottom: 0;
	margin: 0 30px;
	height: 30px;
	line-height: 30px;
}

.header .tools ul, .footer ul {
	margin: 0;
	padding: 0;
}

.header .tools ul li, .footer ul li {
	border: medium none;
	list-style: none;
	display: inline;
	padding: 2px 10px;
}

.menuleft {
	position: absolute;
	top: 50px;
	bottom: 20px; left：0;
	width: 150px;
	border: 0;
	background-color: #e4e4e4;
}

.menuleft .leftmenu {
	padding: 15px;
}

.menuleft .leftmenu ul {
	background-color: #fff;
}

.menuleft .leftmenu ul li {
	list-style: none;
}

.menuleft ul a {
	border-bottom: 1px solid #d4d4d4;
	color: #2d00b1;
}

.main {
	border: 0;
	position: absolute;
	top: 50px;
	bottom: 20px;
	left: 150px;
	right: 10px;
	overflow: auto;
	padding-left: 5px;
}

.main .content {
	/*overflow: hidden;*/
}

.footer {
	position: absolute;
	bottom: 0;
	left: 0;
	right: 0;
	height: 20px;
	line-height: 20px;
	width: 100%;
	background-color: #088bff;
	color: #eee;
}
</style>

</head>
<body>
	<div id="winVP" class="page">
		<div class="header">
			<div class="nav">
				<a href="/">返回首页</a>
			</div>
			<div class="tools">
				<ul>
					<li>您好。<a href="">{$Think.session.user.name}</a></li>
					<li style="color: #98c0ee;">|</li>
					<li><a href="">关于</a></li>
					<li style="color: #98c0ee;">|</li>
					<li><a href="index/loginout">退出</a></li>
				</ul>
			</div>
		</div>
		<div class="menuleft">
			<div class="leftmenu">{block name="leftmenu"} {/block}</div>
		</div>
		<div class="main">
			<div class="content">{block name="main"}主内容{/block}</div>
		</div>
		<div class="footer">
			<ul>
				<li>系统版本：{$version|default="null"}</li>
				<li style="color: #98c0ee;">|</li>
				<li>版权：铁岭移动公司 于显达</li>
				<li style="color: #98c0ee;">|</li>
				<li>联系方式：610671。yuxianda@ln.chinamobile.com</li>
			</ul>
		</div>
	</div>
	<script>
		var resizePageHeight;
		var dhxWins = new dhtmlXWindows();
		var resizePage;
		function _resize_page() {
			_htmlHeight = document.documentElement ? document.documentElement.clientHeight
					: document.body.clientHeight;
			_htmlWidth = document.documentElement ? document.documentElement.clientWidth
					: document.body.clientWidth;
			if (_htmlHeight < 400 || _htmlWidth < 1320) {
				dhtmlx.message({
					text : "窗口过小，或显示不全，建议调整窗口大小。『当前页面大小：" + _htmlWidth + "*"
							+ _htmlHeight + "』"
				});
			}
			if (_htmlHeight < 400) {
				_htmlHeight = 400;
			}
			resizePage();
			dhtmlx.message({
				type : "error",
				text : "调整窗口大小可能会影响页面布局。建议刷新本页面。"
			});
			$(".dhtmlx_message_area").removeAttr("style").css({
				"right" : "50px",
				"bottom" : "40px"
			});
		}
		/*window.addEventListener("resize", function(event) {
			throttle(_resize_page, null, 500, null, 1000);//函数节流、在common.html 
			//_resize_page();
		});*/
		$(function() {
			$(window).bind('resize', function() {
				throttle(_resize_page, null, 500, null, 1500);
			});
			dhxWins.attachViewportTo("winVP"); //窗口可在全屏内活动
			resizePage = function() {
				$(".menuleft").css("height", _htmlHeight - 70 + "px");
				$(".main").css("height", _htmlHeight - 70 + "px");
				$(".main .content").css("height", _htmlHeight - 70 - 20 + "px");
				$(".main").css("width", _htmlWidth - 150 + "px");
			};
			//var mypath = "{$Request.path}";
			//mypath = mypath.substr(mypath.lastIndexOf("/") + 1, mypath.length);
			var cur_page = $(".leftmenu ul li a[href='{$Request.action}.html']");
			document.title = cur_page.text() + "-";
			cur_page.parent().addClass("active");
			//禁用<li>标签click事件
			$(".leftmenu ul li.disabled").on("click", function() {
				return false;
			});
			//拯救 dhtmlx Layout组件导致的body over-flow:hidden 失效的问题
			$("body").removeClass("dhxwins_vp_auto");
			resizePage();
		});
	</script>
</body>
{block name="script"} {/block}
</html>


