---
layout:         post
title:          专线开通全流程辅助工具
date:           2017-12-17 20:24:02
summary:        记录需求，开发思路等
categories:     notes
update_date:    2017-12-17 21:45:03
---

### 专线申请

输入客户信息，输入自己的 姓名、邮箱。分配好ip、vlan后会回复邮件。

### IP/VLAN 查询

仅可查看自己申请的ip、vlan信息。

每次查询需发送邮箱验证码。有效期12小时

#### 使用场景/需求分析

- 不需要显示所有信息，查询可由服务器完成。全局查询

- 数据呈现与数据存储格式无关，存储格式可扩展。

- ​

- 显示带有不同**标签**的数据的数量，点击显示详细条目信息。

- 需一眼看出分配到哪个IP了

- 独立的vlan预分配记录表

- 数据表设计字段类型需考虑历史数据迁移问题

  方案1：数据表字段类型不严格限制，均为varchar。

  方案2：设计两张数据表，保存旧数据的采用方案1设计，新数据符合规范，严格设置字段类型及大小。

若方案1，为了新数据保持规范格式，需在前端严格验证。查询搜索方便。

若方案2，新数据格式规范无隐患，查询需指定数据表，便于后续大数据分析。



#### 数据结构

根据实际需求，数据产生的先后顺序，设计如下几张数据表：

公网IP表

> 预先根据可分配ip，录入好IP信息表，主要字段有：
>
> id、ip、mask、ifUse

vlan表

> 同一台交换机内vlan不可重复，主要字段有：
>
> id、deviceName、vlan、description

申请信息表（新、旧两张表。仅数据类型不一样）

> 申请开通时提供的信息，基于模板excel表格，都是必填项。
>
> 其中：aStation、zxType、cProperty为枚举值。以及附带的oltName
>
> 额外需附加一些字段：
>
> ifOnu、oltName、id、aPerson、aEmail、status、tags

| 序号   | 字段名       | 注释      | 类型/大小        |
| ---- | --------- | ------- | ------------ |
| 0    | aDate     | 申请时间    | TIMESTAMP    |
| 1    | sysid     | 产品实例标识  | int(11)      |
| 2    | zxType    | 专线类别    | varchar(15)  |
| 3    | bandWidth | 带宽      | int(3)       |
| 4    | neFactory | 网元厂家    | int(1)       |
| 5    | aStation  | A端基站    | varchar(15)  |
| 6    | cName     | 客户名     | varchar(90)  |
| 7    | cAddress  | 客户地址    | varchar(180) |
| 8    | cNeeds    | 客户需求    | varchar(450) |
| 9    | ip        | ipId    | int          |
| 10   | vlan      | vlanId  | int          |
| 11   | cPersion  | 客户联系人姓名 | varchar(15)  |
| 12   | cPhone    | 客户联系人电话 | varchar(12)  |
| 13   | cEmail    | 客户联系人邮箱 | varchar(40)  |
| 143  | mPerson   | 客户经理姓名  | varchar(15)  |
| 14   | mPhone    | 客户经理电话  | varchar(12)  |
| 15   | mEmail    | 客户经理邮箱  | varchar(40)  |
| 16   | cProperty | 单位性质    | varchar(12)  |
| 17   | marks     | 备注      | varchar(300) |
| 18   | ifOnu     | 是否走onu  | int(1)       |
| 19   | oltName   | olt名称   | varchar(100) |
| 20   | id        | id      | int          |
| 21   | aPerson   | 信息申请人   | varchar(30)  |
| 22   | aEmail    | 信息申请人邮箱 | varchar(40)  |
| 23   | status    | 状态      | int(1)       |
| 24   | tags      | 标签      | varchar(50)  |

### 信息修改

管理员查询、修改。

[ ] 调整数据转化成可直接生成数据制作脚本的格式

### 流程录入信息生成



### 数据制作 

